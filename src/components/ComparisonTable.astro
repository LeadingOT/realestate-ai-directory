---
interface Item {
  name: string;
  slug: string;
  features: string[];
  pricing: { model: string; startingPrice?: string };
  rating?: number;
}

interface Props {
  items: Item[];
  featureList: string[];
  title?: string;
}

const { items, featureList, title } = Astro.props;
---

<div class="overflow-x-auto">
  {title && <h2 class="text-2xl font-bold mb-4">{title}</h2>}
  <table class="w-full border-collapse text-sm">
    <thead>
      <tr class="bg-gray-50">
        <th class="text-left p-3 border-b font-medium">Feature</th>
        {items.map((item) => (
          <th class="text-center p-3 border-b font-medium">
            <a href={`/listing/${item.slug}`} class="hover:text-blue-600">{item.name}</a>
          </th>
        ))}
      </tr>
    </thead>
    <tbody>
      <tr class="border-b">
        <td class="p-3 font-medium text-gray-700">Pricing</td>
        {items.map((item) => (
          <td class="p-3 text-center">{item.pricing.startingPrice || item.pricing.model}</td>
        ))}
      </tr>
      <tr class="border-b">
        <td class="p-3 font-medium text-gray-700">Rating</td>
        {items.map((item) => (
          <td class="p-3 text-center">{item.rating ? `★ ${item.rating.toFixed(1)}` : 'N/A'}</td>
        ))}
      </tr>
      {featureList.map((feature) => (
        <tr class="border-b">
          <td class="p-3 text-gray-700">{feature}</td>
          {items.map((item) => (
            <td class="p-3 text-center">
              {item.features.includes(feature) ? (
                <span class="text-green-600">✓</span>
              ) : (
                <span class="text-gray-300">✗</span>
              )}
            </td>
          ))}
        </tr>
      ))}
    </tbody>
  </table>
</div>
